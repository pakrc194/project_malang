<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>list</title>
    <style>
    /* ============================================== */
    /* 공연 목록 페이지 (perf_list) 스타일 */
    /* ============================================== */
    body {
        font-family: Arial, sans-serif;
        color: #333;
        margin: 0;
        padding: 0;
    }
    input[type="text"], input[type="date"], select, textarea {
        /* 기본 입력 필드 스타일 (공연 목록 페이지에서 많이 사용되진 않으나 공통 스타일 유지) */
        padding: 10px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box; 
        font-size: 1em; 
    }


    /* 폼 컨트롤 (장르 선택, 정렬 링크) 포함 컨테이너 */
    .perf_list_header {
        max-width: 1000px; 
        margin: 30px auto 10px auto;
        padding: 0 10px;
        
        display: flex; 
        flex-wrap: wrap; 
        align-items: center;
        justify-content: space-between; /* 좌우 끝 배치 */
    }

    /* 왼쪽 그룹 (장르) - HTML에서 .genre-group으로 묶는 것이 권장됩니다. */
    .perf_list_header .genre-group {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    /* 오른쪽 그룹 (정렬 링크) - HTML에서 .order-links로 묶는 것이 권장됩니다. */
    .perf_list_header .order-links {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    /* 장르 선택 드롭다운 */
    #selectGenre {
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 0.95em;
        cursor: pointer;
        width: auto;
    }

    /* 정렬 링크 스타일 */
    .perf_list_header a {
        color: #5a80d4;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95em;
    }
    .perf_list_header a:hover {
        text-decoration: underline;
        color: #1f3f6e;
    }


    /* --- 테이블 공통 스타일 --- */
    .perf_list_header table,
    .perf_list table {
        width: 100%;
        border-collapse: collapse; 
        table-layout: fixed; 
        border: none; /* 외곽선 제거 */
    }

    /* 스크롤바 너비를 고려하여 헤더 테이블의 너비를 조정 */
    .perf_list_header table {
        width: calc(100% - 17px); /* 스크롤바 공간 확보 */
        margin-top: 10px;
        border-top: 2px solid #1f3f6e; /* 상단 강조선 */
        margin-left: 0;
        margin-right: auto;
    }

    /* 목록 테이블 컨테이너 (스크롤 영역) */
    .perf_list {
        max-width: 1000px;
        margin: 0 auto;
        padding: 0 10px;
        
        max-height: 70vh; /* 최대 높이 설정 */
        overflow-y: auto; /* Y축 스크롤 적용 */
        
        border: none; /* 외곽선 제거 */
        border-radius: 0; 
    }

    /* 헤더 셀 (TR) 스타일 */
    .perf_list_header tr {
        background-color: #f8f8f8;
        color: #333;
        font-weight: bold;
        border-bottom: 2px solid #ddd; /* 헤더 하단 구분선 */
    }

    .perf_list_header td {
        padding: 12px 10px;
        border: none; /* 셀 테두리 제거 */
        text-align: center;
        vertical-align: middle;
    }

    /* 목록 셀 (TD) 스타일 */
    .perf_list tr td {
        padding: 15px 10px;
        border: none; /* 셀 테두리 제거 */
        border-bottom: 1px solid #eee; /* 행 하단 구분선 */
        vertical-align: middle;
    }
    /* 목록 테이블의 마지막 행 구분선 제거 */
    .perf_list table tr:last-child td {
        border-bottom: none;
    }

    /* 목록 행에 마우스 오버 효과 */
    .perf_list tr:hover {
        background-color: #f5f5f5;
        transition: background-color 0.2s;
    }

    /* --- 열 너비 및 내용 정렬 --- */
    .perf_list_name, .perf_list_genre, .perf_list_running, 
    .perf_list_perf_start, .perf_list_venue, .perf_list_region {
        text-align: center;
        white-space: normal; /* 줄바꿈 허용 */
        word-wrap: break-word; 
    }

    /* 열 너비 설정 (헤더와 목록 동일하게 유지) */
    .perf_list_header .perf_list_name, .perf_list .perf_list_name { width: 15%; }
    .perf_list_header .perf_list_poster, .perf_list .perf_list_poster { width: 12%; }
    .perf_list_header .perf_list_genre, .perf_list .perf_list_genre { width: 11%; }
    .perf_list_header .perf_list_running, .perf_list .perf_list_running { width: 9%; }
    .perf_list_header .perf_list_perf_start, .perf_list .perf_list_perf_start { width: 15%; }
    .perf_list_header .perf_list_venue, .perf_list .perf_list_venue { width: 20%; }
    .perf_list_header .perf_list_region, .perf_list .perf_list_region { width: 8%; }


    /* 포스터 이미지 스타일 */
    .perf_list_poster img {
        max-width: 100%;
        height: 100px; /* 높이 고정 */
        object-fit: cover; 
        display: block;
        margin: 0 auto;
        border-radius: 4px;
    }

    /* 공연 이름 링크 스타일 */
    .perf_list_name a {
        color: #1f3f6e;
        text-decoration: none;
        font-weight: 600;
    }
    .perf_list_name a:hover {
        text-decoration: underline;
        color: #5a80d4;
    }

    /* 강조된 장르 (선택된 경우) */
    .perf_list_genre b {
        color: #dc3545;
    }
    </style>
    <script>
        window.onload = function() {
            let genreSelect = document.querySelector('#selectGenre')
            genreSelect.addEventListener('change', (e)=>{
                console.log(genreSelect.options[genreSelect.selectedIndex].value)
                location.href = `/list/${genreSelect.options[genreSelect.selectedIndex].value}`
            })
        }
    </script>
</head>
<body>
    {% include './header.html' %}
    <wrapper>
        <div class="perf_list_header">
            <div class="genre-group">
                장르
                <select id="selectGenre">
                    <option value="all" {%if genre=='all'%}selected{%endif%}>전체보기</option>
                    <option value="origin" {%if genre=='origin'%}selected{%endif%}>오리지널</option>
                    <option value="creative" {%if genre=='creative'%}selected{%endif%}>창작</option>
                    <option value="license" {%if genre=='license'%}selected{%endif%}>라이선스</option>
                    <option value="nonVerbal" {%if genre=='nonVerbal'%}selected{%endif%}>넌버벌퍼포먼스</option>
                </select>
            </div>

            <div class="order-links">
                <a href="?order=1">최신순</a>/<a href="?order=2">지역순</a>
            </div>
            

            <table border="">
             <tr>
                <td class="perf_list_name">공연 이름</td>
                <td class="perf_list_poster">포스터</td>
                <td class="perf_list_genre">장르</td>
                <td class="perf_list_running">러닝타임</td>
                <td class="perf_list_perf_start">공연 시작 날짜</td>
                <td class="perf_list_venue">공연장 이름</td>
                <td class="perf_list_region">지역</td>
            </tr>   
            </table>
        </div>
        <div class="perf_list">
            <table border="">
                {%for perf in perfList%}
                    <tr>
                        <td class="perf_list_name"><a href="/desc/{{perf.perf_id}}">{{perf.perf_name}}</a></td>
                        <td class="perf_list_poster"><img src="/img/{{perf.poster_url}}" alt=""></td>
                        <td class="perf_list_genre">{%if genre=='all'%}{{perf.genre}}{%else%}<b>{{perf.genre}}</b>{%endif%}</td>
                        <td class="perf_list_running">{{perf.running_time}}분</td>
                        <td class="perf_list_perf_start">{{perf.start_date}}</td>
                        <td class="perf_list_venue">{{perf.venue_name}}</td>
                        <td class="perf_list_region">{{perf.venue_region}}</td>
                    </tr>    
                {%endfor%}
            </table>
        </div>
    </wrapper>
    {# <a href="/perf/upload">등록</a> #}
</body>
</html>