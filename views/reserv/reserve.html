<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>좌석선택하기</title>
    <!-- <link rel="stylesheet" href="../style/reserve.css"> -->

    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .Big {
            width: 1200px;
            margin: auto;
        }
        .musical_name {
            height: 70px;
            /* text-align: center; */
            font-size: 40px;
            line-height: 70px;
        }
        .des_main {
            border: 1px solid #f00;
            display: flex;
            align-items: center;
            justify-content: space-evenly;
        }
        .musical_info {
            border: 1px solid #000;
            display: flex;
            width: 1200px;
            align-items: center;
            justify-content: space-evenly;
        }
        .musical_seat {
            width: 800px;
        }

        .musical_info > img{
            width: 250px;
            height: 350px;
        }

        .actor {
            /* height: 200px; */
            background-color: #faa;
        }

        .actor > img {
            /* height: 200px; */
            width: 1200px;
        }

        .story {
            /* height: 200px; */
            background-color: #afa;
            align-items: center;
            text-align: center;
        }
        .story > img {
            width: 1200px;
        }

        .seat {
            /* height: 200px; */
            background-color: #dbf;
        }
        .seat > img {
            width: 1200px;
        }

        .casting {
            /* height: 200px; */
            background-color: #aaf;
        }
        .casting > img {
            width: 1200px;
        }

        .review {
            /* height: 200px; */
            background-color: #3cf;
        }
        .review > img {
            width: 1200px;
        }

        .footer {
            /* height: 200px; */
            background-color: #f77;
        }
        .footer > img {
            width: 1200px;
        }

        .seat_aside {
            position: relative;
            align-items: center;
            text-align: center;
            border: 1px solid #000;
            width: 400px;
            height: 800px;
        }

        .seat_aside > .m_title > div:first-of-type {
            font-size: 30px;
            display: flex;
            flex-wrap: wrap;
            height: 70px;
            line-height: 30px;
        }

        .show_th {
            height: 30px;
        }

        .m_title {
            height: 100px;
            background-color: #dbf;
        }

        .seatG {
            height: 80px;
            /* line-height: 100px; */
            background-color: #3cf;
        }

        .seatC {
            height: 120px;
            /* line-height: 100px; */
            /* background-color: #aaf; */
        }

        .doneBtn {
            height: 100px;
            /* line-height: 100px; */
            background-color: #afa;
            bottom: 0;
        }

        .doneBtn > .seat_tot_price {
            line-height: 30px;
            height: 30px;
        }

        .select_done {
            height: 50px;
            width: 300px;
            
        }
        .choiceDate > img{
            height: 350px;
            width: 200px;
        }

        .first > .section > input{
            appearance: none;
            box-sizing: border-box;
            background-clip: content-box;
            margin-left: 5px;
            padding: 0;
            width: 15px;
            height: 15px;
            cursor: pointer;
            background-color: yellowgreen;
            border: 3px solid yellowgreen;
            /* margin-left: 8px; */
        }
        .first > .section > input:checked {
            border-color: #f00;
            /* background-color: yellowgreen; */
        }

        .second > .section > input{
            appearance: none;
            box-sizing: border-box;
            background-clip: content-box;
            width: 15px;
            height: 15px;
            cursor: pointer;
            background-color: violet;
            border: 3px solid violet;
            margin-left: 5px;
        }
        .second > .section > input:checked {
            border-color: #f00;
            /* background-color: yellowgreen; */
        }

        .third > .section > input{
            appearance: none;
            box-sizing: border-box;
            background-clip: content-box;
            width: 15px;
            height: 15px;
            cursor: pointer;
            background-color: skyblue;
            border: 3px solid skyblue;
            margin-left: 5px;
        }
        .third > .section > input:checked {
            border-color: #f00;
            /* background-color: yellowgreen; */
        }

        .seat_wrapper {
            /* display: flex; */

            width: 800px;
            /* height: 800px; */
            border: 1px solid #ccc;
            /* box-sizing: border-box; */
        }
        .first {
            width: 800px;
            height: 200px;
            display: flex;
        }
        .second {
            width: 800px;
            height: 200px;
            display: flex;
        }
        .third {
            width: 800px;
            height: 200px;
            display: flex;
        }

        .stair {
            width: 25px;
            height: 20px;
            text-align: center;
            font-size: 13px;
            /* background-color: #ff0; */
        }

        .stage {
            width: 800px;
            height: 200px;
            line-height: 200px;
            text-align: center;
            font-size: 100px;
            font-weight: 600;
        }

        .section {
            width: 250px;
            height: 200px;
            border: 1px solid #000;
            box-sizing: border-box;
            padding: 5px;
        }

        .hallway {
            width: 800px;
            height: 20px;
            /* background-color: #ff0; */
        }

        .seat_ {
            width: 15px;
            height: 15px;
            margin: 2px;
            background-color: #ccc;
            border: 3px solid #000;
            box-sizing: border-box;
        }

        /* .second > .section:nth-of-type(1) {
            display: flex;
        } */

        .stair > div {
            margin-top: 5px;
        }

        .stair > div:first-of-type {
            margin-top: 10px;
        }

        .section > .Sold {
            border-color: #555;
            background-color: #555;
            cursor: default;
        }

    </style>

    <script>
        
        
        // 1 웹소켓 서버에 연결시도
        const socket = new WebSocket({host: '0.0.0.0', port: 80})
        // 2 웹소켓 서버에 연결성공
        socket.onopen = ()=>{
            // 3.1 클라이언트가 송신
            // socket.send(`user_id {{user_id}}`)
        }
        // 3.2 클라이언트가 수신
        socket.onmessage = (e)=>{

            // let data = e.data
            const data = JSON.parse(e.data);
            let result = data.result
            console.log(`reserve에서 수신: `, data)

            if (data.type == 'temp') {
                if (data.error) {
                    console.log('데이터 받아오기 실패: ', data.error)
                }
                else {
                    document.querySelector(".seatC").innerHTML = ``
                    let arr = []
                    
                    let totprice = 0
                    for (let i = 0; i < data.result.length; i++) {
                        let user_id = JSON.stringify(data.result[i].user_id).replace(/\"/g, '')
                        let grade = JSON.stringify(data.result[i].grade).replace(/\"/g, '')
                        let area = JSON.stringify(data.result[i].area).replace(/\"/g, '')
                        let s_row = JSON.stringify(data.result[i].s_row).replace(/\"/g, '')
                        let s_col = JSON.stringify(data.result[i].s_col).replace(/\"/g, '')
                        let price = JSON.stringify(data.result[i].price).replace(/\"/g, '')
                        document.querySelector(".seatC").innerHTML += `좌석등급 ${grade} ${area}구역 ${s_row}열 ${s_col} ${price}원<br/>`
                        totprice += eval(price)
                        
                        arr.push(`${grade} ${area} ${s_row} ${s_col} ${price}`)
                        
                    }
                    
                    
                    document.querySelector(".select_done").value = `${totprice}원     좌석 선택 완료`
                    document.querySelector(".itemsInput").value = JSON.stringify(arr)
                    document.querySelector(".Total").value = totprice
                    if (totprice != 0) {
                        document.querySelector(".select_done").disabled = false
                    }
                    else {
                        document.querySelector(".select_done").disabled = true
                    }
                }
            }
            else if (data.type == "seat_status" && data.result.length > 0) {

                // let area = ["A", "B", "C", "D", "E", "F", "G", "H", "I"]
                // let row = ["first", "second", "third"]
                // let grade = ["R", "S", "A"]
                // let seat_id = 1
                
                // document.querySelector(`.first > .section`).innerHTML = ''
                // document.querySelector(`.first > .section ~ .section`).innerHTML = ''
                // document.querySelector(`.first > .section ~ .section ~ .section`).innerHTML = ''
                // document.querySelector(`.second > .section`).innerHTML = ''
                // document.querySelector(`.second > .section ~ .section`).innerHTML = ''
                // document.querySelector(`.second > .section ~ .section ~ .section`).innerHTML = ''
                // document.querySelector(`.third > .section`).innerHTML = ''
                // document.querySelector(`.third > .section ~ .section`).innerHTML = ''
                // document.querySelector(`.third > .section ~ .section ~ .section`).innerHTML = ''
                
                // for(let aa = 0; aa < 3; aa++) {
                
                //     for (let i = 0; i < 3; i++) {
                //         for (let j = 1; j < 11; j++) {
                //             document.querySelector(`.${row[aa]} > .section`).innerHTML += `<input type="checkbox" value="${grade[aa]} ${area[aa*3]} ${i+1} ${j}" id="indiseat" class="Available" onclick="ck_cnt(this)">`
                //         }
                //     }
                //     for (let i = 1; i < 3*10+1; i++) {
                //         document.querySelector(`.${row[aa]} > .section:nth-of-type(1) > input:nth-of-type(${i})`).style.marginLeft = "8px"
                //     }

                //     for (let i = 0; i < 3; i++) {
                //         for (let j = 0; j < 10; j++) {
                //             document.querySelector(`.${row[aa]} > .section ~ .section`).innerHTML += `<input type="checkbox" value="${grade[aa]} ${area[aa*3+1]} ${i+1} ${j+1}" id="indiseat" class="Available" onclick="ck_cnt(this)">`
                //         }
                //     }
                //     for (let i = 1; i < 3*10+1; i++) {
                //         document.querySelector(`.${row[aa]} > .section ~ .section > input:nth-of-type(${i})`).style.marginLeft = "8px"
                //     }

                //     for (let i = 0; i < 3; i++) {
                //         for (let j = 0; j < 10; j++) {
                //             document.querySelector(`.${row[aa]} > .section ~ .section ~ .section`).innerHTML += `<input type="checkbox" value="${grade[aa]} ${area[aa*3+2]} ${i+1} ${j+1}" id="indiseat" class="Available" onclick="ck_cnt(this)">`
                //         }
                //     }
                //     for (let i = 1; i < 3*10+1; i++) {
                //         document.querySelector(`.${row[aa]} > .section ~ .section ~ .section > input:nth-of-type(${i})`).style.marginLeft = "8px"
                //     }
                // }

                console.log('스케쥴 아이디: ', "{{avoid[0].schedule_id}}", data.result[0])
                if ("{{avoid[0].schedule_id}}" == data.result[0].schedule_id){

                    document.querySelectorAll("#indiseat").forEach(seat =>{
                    for (let i of data.result){
                        if (i.user_id != "{{user_id}}"){
                            arr = seat.value.split(' ')
                            // console.log('좌석: ', arr)
                            if (arr[0] == i.grade && arr[1] == i.area && arr[2] == i.s_row && arr[3] == i.s_col){
                                seat.className = `${i.seat_status}`
                                if (i.seat_status == "Sold"){
                                    seat.style.borderColor = "#555"
                                    seat.style.backgroundColor= "#555"
                                    seat.style.cursor= "default";
                                }
                                else {
                                    // 예약 상태일 때
                                    seat.style.borderColor = "#555"
                                    seat.style.backgroundColor= "#fff"
                                    seat.style.cursor= "default";
                                }
                            }
                            // else {
                            //     seat.className = "Available"
                            //     if (arr[0] == "R") {
                            //         seat.style.cursor="pointer";
                            //         seat.style.backgroundColor= "yellowgreen";
                            //         seat.style.borderColor="yellowgreen";
                            //     }
                            //     else if (arr[0] == "S") {
                            //         seat.style.cursor="pointer";
                            //         seat.style.backgroundColor= "violet";
                            //         seat.style.borderColor="violet";
                            //     }
                            //     else {
                            //         seat.style.cursor="pointer";
                            //         seat.style.backgroundColor= "skyblue";
                            //         seat.style.borderColor="skyblue";
                            //     }

                            // }
                            
                        }
                    }
                })

                }

                
                                                

                // document.querySelectorAll("#indiseat").forEach(seat =>{
                //     if (seat.className == "Sold") {
                //         seat.style.borderColor = "#555"
                //         seat.style.backgroundColor= "#555"
                //         seat.style.cursor= "default";
                //     }
                //     else if (seat.className == "Reserved"){
                //         seat.style.borderColor = "#555"
                //         seat.style.backgroundColor= "#fff"
                //         seat.style.cursor= "default";
                //     }
                // })
            }
            else if (data.type == "A" && data.result.length > 0) {
                console.log('A 스케쥴 아이디: ', data.schedule_id, "{{avoid[0].schedule_id}}")
                if (data.schedule_id == "{{avoid[0].schedule_id}}"){

                    document.querySelectorAll("#indiseat").forEach(seat =>{
                        arr = seat.value.split(' ')
                        console.log(arr)
                        // console.log('좌석: ', arr)
                        if (arr[1] == result[0].area && arr[2] == result[0].seat_row && arr[3] == result[0].seat_number){
                            seat.className = `Available`
                            if (arr[0] == "R") {
                                seat.style.cursor="pointer";
                                seat.style.backgroundColor= "yellowgreen";
                                seat.style.borderColor="yellowgreen";
                            }
                            else if (arr[0] == "S") {
                                seat.style.cursor="pointer";
                                seat.style.backgroundColor= "violet";
                                seat.style.borderColor="violet";
                            }
                            else {
                                seat.style.cursor="pointer";
                                seat.style.backgroundColor= "skyblue";
                                seat.style.borderColor="skyblue";
                            }
                        }
                    })

                }
            }

            
                    
        }

        
        window.addEventListener('DOMContentLoaded', function(){

            

            document.querySelectorAll("#indiseat").forEach(seat =>{
                if (seat.className == "Sold") {
                    seat.style.borderColor = "#555"
                    seat.style.backgroundColor= "#555"
                    seat.style.cursor= "default";
                }
                else if (seat.className == "Reserved"){
                    seat.style.borderColor = "#555"
                    seat.style.backgroundColor= "#fff"
                    seat.style.cursor= "default";
                }
            })

            let frm = document.forms.frm
            document.querySelector(".select_done").onclick = function() {
               frm.submit()
            }
        })

        let seat_cnt = 0
        // 예매 개수 4개로 제한
        function ck_cnt(obj) {

            if (obj.className == "Available") {

                socket.send([obj.value, "{{user_id}} {{id}} {{arr.date}} {{arr.time}}"].join(' '))
                if (obj.checked == true){
                    seat_cnt++
                }
                else {
                    seat_cnt--
                }
    
                if (seat_cnt > 4) {
                    alert('선택 가능한 좌석 지정을 초과했습니다.')
                    obj.checked = false
                    seat_cnt--
                    // socket1.send(obj.value)
                    socket.send([obj.value, "{{user_id}} {{id}} {{arr.date}} {{arr.time}}"].join(' '))

                }
                
                console.log([obj.value, "{{user_id}} {{id}} {{arr.date}} {{arr.time}}"].join(' '))
            }
        }

    </script>

</head>
<body>
     <form action="/desc/discount/{{id}}" name="frm"  method="POST">
    <!-- <h1>좌석선택하기</h1> -->
    <div class="Big">
        <!-- <div class="musical_name">뮤지컬 〈MAD HATTER〉</div> -->
        <div class="musical_info">
            <div class="musical_seat">
                <div class="stage">STAGE</div>
                <div class="seat_wrapper">
                    <div class="first">
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id <= 10 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R A 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 10 and ii.seat_id <= 20 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R A 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 20 and ii.seat_id <= 30 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R A 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>
                        <div class="stair">
                            <div>1</div>
                            <div>2</div>
                            <div>3</div>
                        </div>
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 30 and ii.seat_id <= 40 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R B 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 40 and ii.seat_id <= 50 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R B 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 50 and ii.seat_id <= 60 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R B 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>
                        <div class="stair">
                            <div>1</div>
                            <div>2</div>
                            <div>3</div>
                        </div>
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 60 and ii.seat_id <= 70 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R C 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 70 and ii.seat_id <= 80 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R C 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 80 and ii.seat_id <= 90 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="R C 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>

                    </div>
                    <div class="hallway"></div>
                    
                    <div class="second">
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 90 and ii.seat_id <= 100 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S D 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 100 and ii.seat_id <= 110 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S D 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 110 and ii.seat_id <= 120 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S D 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>
                        <div class="stair">
                            <div>1</div>
                            <div>2</div>
                            <div>3</div>
                        </div>
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 120 and ii.seat_id <= 130 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S E 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 130 and ii.seat_id <= 140 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S E 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 140 and ii.seat_id <= 150 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S E 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>
                        <div class="stair">
                            <div>1</div>
                            <div>2</div>
                            <div>3</div>
                        </div>
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 150 and ii.seat_id <= 160 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S F 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 160 and ii.seat_id <= 170 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S F 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 170 and ii.seat_id <= 180 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="S F 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>

                    </div>
                    
                    <div class="hallway"></div>
                    <div class="third">
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 180 and ii.seat_id <= 190 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A G 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 190 and ii.seat_id <= 200 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A G 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 200 and ii.seat_id <= 210 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A G 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>
                        <div class="stair">
                            <div>1</div>
                            <div>2</div>
                            <div>3</div>
                        </div>
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 210 and ii.seat_id <= 220 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A H 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 220 and ii.seat_id <= 230 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A H 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 230 and ii.seat_id <= 240 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A H 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}  
                            
                        </div>
                        <div class="stair">
                            <div>1</div>
                            <div>2</div>
                            <div>3</div>
                        </div>
                        <div class="section">
                            
                            {% for ii in avoid %}
                                {% if ii.seat_id > 240 and ii.seat_id <= 250 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A I 1 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 250 and ii.seat_id <= 260 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A I 2 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% elif ii.seat_id > 260 and ii.seat_id <= 270 %}
                                    {% set number = ((ii.seat_id-1)%10)+1 %}
                                    <input type="checkbox" value="A I 3 {{number}}" id="indiseat" class="{{ii.seat_status}}" onclick="ck_cnt(this)">
                                {% endif %}
                            {% endfor %}
                            
                        </div>
                    </div>
                    <!-- <input type="checkbox"> -->
                    
                </div>






            </div>
            <div class="seat_aside">
                <div class="m_title">
                    <div>뮤지컬 〈{{perf.perf_name}}〉</div>
                    <div>{{arr.name}}</div>
                </div>
                
                <div  class="choiceDate">
                    <img src="../../img/{{perf.poster_url}}">
                    {{arr.date}} {{arr.time}}회차
                </div>
                <div class="seatG">
                    {% for i in seat %}
                    {{i.grade_code}}석 {{i.price}}원<br/>
                    {% endfor %}
                    <!-- [yellowgreen] R석 160,000원<br/>
                    [violet] S석 130,000원<br/>
                    [skyblue] A석 90,000원<br/> -->
                </div>
                선택한 좌석
                <div class="seatC"></div>
                <div class="doneBtn">
                    <!-- <div class="seat_tot_price">좌석의 가격 합산 정보</div> -->
                        <input type="hidden" name="items" class="itemsInput">
                        <input type="hidden" name="items" class="Total">
                        <input type="submit" class="select_done" name="seat_select" value="좌석을 선택해주세요" disabled>
                   
                </div>
            </div>
        </div>
    </div>
    </form>
</body>
</html>